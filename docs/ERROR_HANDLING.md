# ERROR_HANDLING

## 現状

- 公開 API は最小限で、戻り値は以下の形式です。
  - `const char*`（バージョン文字列）
  - `int`（SDK バージョン / 成否）

実装は例外が発生しうる箇所で `try/catch (...)` を使い、例外が ABI 境界を越えないようにしています。

根拠:
- [src/spoutdx_ffi.cpp](../src/spoutdx_ffi.cpp)

## 方針（今後の拡張に向けた原則）

Receiver API などを追加する際は、次の原則を採用します。

- **C ABI を跨いで例外を投げない**
- **エラーは数値コードで返す**（0/非0、または enum）
- **追加情報が必要なら「最後のエラー文字列取得」API を別途用意**
  - 呼び出しスレッド単位で安全に取得できる形が望ましい

## Assumptions

- 現段階では API が少ないため、詳細なエラーコード設計は未着手。

## 決定事項（運用上の前提）

- 公開 API は原則として **数値エラーコード**（`int` または固定値の enum）で返します。
- 詳細情報が必要な場合に備え、将来 `last_error` 形式の補助 API を追加できるようにします。
